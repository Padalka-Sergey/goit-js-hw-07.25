{"version":3,"file":"01-gallery.js","sources":["../src/js/01-gallery.js"],"sourcesContent":["import { galleryItems } from './gallery-items.js';\n// Change code below this line\n\nconst listGallery = document.querySelector('.gallery');\nlet instance = null;\nlet lightBoxRef = null;\n\nconst markup = galleryItems\n  .map(\n    ({ preview, original, description }) => `\n  <li class=\"gallery__item\">\n  <a class=\"gallery__link\" href=${original}>\n  <img\n  class=\"gallery__image\"\n  src=${preview}\n  data-source=\"large-image.jpg\"\n  alt=${description}\n  />\n  </a>\n  </li>`\n  )\n  .join('');\n\nlistGallery.innerHTML = markup;\n\nlistGallery.addEventListener('click', openModalImageHandler);\n\nfunction openModalImageHandler(evt) {\n  evt.preventDefault();\n  if (evt.target.nodeName !== 'IMG') {\n    return;\n  }\n  const parentEl = evt.target.parentNode.href;\n  instance = basicLightbox.create(`\n    <img src=${parentEl} width=\"800\" height=\"600\">\n    `);\n\n  instance.show();\n  makeListeners();\n}\n\nfunction makeListeners() {\n  document.addEventListener('keydown', removeListenerEscHandler);\n  lightBoxRef = document.querySelector('.basicLightbox');\n  lightBoxRef.addEventListener('click', clickModalDelListenerHandler);\n}\n\nfunction clickModalDelListenerHandler(evt) {\n  // console.log(evt.target);\n  if (evt.target !== lightBoxRef) {\n    return;\n  }\n  document.removeEventListener('keydown', removeListenerEscHandler);\n}\n\nfunction removeListenerEscHandler(evt) {\n  // console.log('Слушатель ESC');\n  if (evt.code !== 'Escape') {\n    return;\n  }\n  instance.close(() => {\n    document.removeEventListener('keydown', removeListenerEscHandler);\n  });\n}\n"],"names":["listGallery","instance","lightBoxRef","markup","galleryItems","preview","original","description","openModalImageHandler","evt","parentEl","makeListeners","removeListenerEscHandler","clickModalDelListenerHandler"],"mappings":"2FAGA,MAAMA,EAAc,SAAS,cAAc,UAAU,EACrD,IAAIC,EAAW,KACXC,EAAc,KAElB,MAAMC,EAASC,EACZ,IACC,CAAC,CAAE,QAAAC,EAAS,SAAAC,EAAU,YAAAC,CAAa,IAAK;AAAA;AAAA,kCAEVD,CAAQ;AAAA;AAAA;AAAA,QAGlCD,CAAO;AAAA;AAAA,QAEPE,CAAW;AAAA;AAAA;AAAA,QAIhB,EACA,KAAK,EAAE,EAEVP,EAAY,UAAYG,EAExBH,EAAY,iBAAiB,QAASQ,CAAqB,EAE3D,SAASA,EAAsBC,EAAK,CAElC,GADAA,EAAI,eAAc,EACdA,EAAI,OAAO,WAAa,MAC1B,OAEF,MAAMC,EAAWD,EAAI,OAAO,WAAW,KACvCR,EAAW,cAAc,OAAO;AAAA,eACnBS,CAAQ;AAAA,KAClB,EAEHT,EAAS,KAAI,EACbU,GACF,CAEA,SAASA,GAAgB,CACvB,SAAS,iBAAiB,UAAWC,CAAwB,EAC7DV,EAAc,SAAS,cAAc,gBAAgB,EACrDA,EAAY,iBAAiB,QAASW,CAA4B,CACpE,CAEA,SAASA,EAA6BJ,EAAK,CAErCA,EAAI,SAAWP,GAGnB,SAAS,oBAAoB,UAAWU,CAAwB,CAClE,CAEA,SAASA,EAAyBH,EAAK,CAEjCA,EAAI,OAAS,UAGjBR,EAAS,MAAM,IAAM,CACnB,SAAS,oBAAoB,UAAWW,CAAwB,CACpE,CAAG,CACH"}